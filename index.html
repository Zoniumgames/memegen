<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Meme Studio iOS26</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
margin: 0;
font-family: 'SF Pro Display', 'Segoe UI', sans-serif;
background: linear-gradient(135deg, #f8dce3, #d0f0e0, #e0e7ff);
background-size: 400% 400%;
animation: gradientShift 15s ease infinite;
display: flex;
height: 100vh;
overflow: hidden;
}

@keyframes gradientShift {
0% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
100% { background-position: 0% 50%; }
}

.glass-panel {
backdrop-filter: blur(20px);
background: rgba(255, 255, 255, 0.2);
border-radius: 20px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
border: 1px solid rgba(255, 255, 255, 0.3);
padding: 30px;
width: 320px;
display: flex;
flex-direction: column;
gap: 20px;
position: fixed;
top: 40px;
left: 40px;
z-index: 10;
}

.glass-panel h2 {
margin: 0;
font-size: 1.4rem;
color: #333;
}

label {
font-size: 0.9rem;
color: #333;
}

input[type="text"],
input[type="file"] {
padding: 10px;
border-radius: 12px;
border: none;
background: rgba(255, 255, 255, 0.6);
font-size: 0.9rem;
color: #333;
}

.slider-group {
display: flex;
flex-direction: column;
}

.slider-label {
display: flex;
justify-content: space-between;
font-size: 0.85rem;
color: #333;
}

input[type="range"] {
-webkit-appearance: none;
height: 6px;
border-radius: 3px;
background: #ccc;
outline: none;
}

input[type="range"]::-webkit-slider-thumb {
-webkit-appearance: none;
width: 16px;
height: 16px;
border-radius: 50%;
background: #4ade80;
cursor: pointer;
box-shadow: 0 0 4px rgba(0,0,0,0.3);
}

.floating-button {
padding: 12px 20px;
background: linear-gradient(135deg, #4ade80, #22c55e);
border: none;
border-radius: 30px;
font-weight: bold;
color: white;
cursor: pointer;
transition: transform 0.3s ease, box-shadow 0.3s ease;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.floating-button:hover {
transform: translateY(-3px);
box-shadow: 0 6px 16px rgba(0,0,0,0.3);
}

.main {
flex: 1;
display: flex;
justify-content: center;
align-items: center;
margin-left: 380px;
}

canvas {
border-radius: 20px;
box-shadow: 0 0 30px rgba(0,0,0,0.2);
border: 2px solid #ddd;
max-width: 80vw;
max-height: 80vh;
}
</style>
</head>
<body>

<div class="glass-panel">
<h2>üñºÔ∏è Meme Studio</h2>

<label>Imagen</label>
<input type="file" id="imageInput" accept="image/*">

<label>Texto superior</label>
<input type="text" id="topText">

<div class="slider-group">
<div class="slider-label">
<span>Tama√±o texto superior</span>
<span id="topSizeValue">40</span>
</div>
<input type="range" id="topTextSize" min="10" max="100" value="40">
</div>

<label>Texto inferior</label>
<input type="text" id="bottomText">

<div class="slider-group">
<div class="slider-label">
<span>Tama√±o texto inferior</span>
<span id="bottomSizeValue">40</span>
</div>
<input type="range" id="bottomTextSize" min="10" max="100" value="40">
</div>

<div class="slider-group">
<div class="slider-label">
<span>Grosor del borde</span>
<span id="borderValue">2</span>
</div>
<input type="range" id="borderThickness" min="1" max="10" value="2">
</div>

<button class="floating-button" id="generateMeme">Generar Meme</button>
<button class="floating-button" id="downloadMeme">Descargar Meme</button>
</div>

<div class="main">
<canvas id="memeCanvas"></canvas>
</div>

<script>
const canvas = document.getElementById('memeCanvas');
const ctx = canvas.getContext('2d');
const imageInput = document.getElementById('imageInput');
const topTextInput = document.getElementById('topText');
const topTextSizeInput = document.getElementById('topTextSize');
const bottomTextInput = document.getElementById('bottomText');
const bottomTextSizeInput = document.getElementById('bottomTextSize');
const borderThicknessInput = document.getElementById('borderThickness');
const generateMemeButton = document.getElementById('generateMeme');
const downloadMemeButton = document.getElementById('downloadMeme');

const topSizeValue = document.getElementById('topSizeValue');
const bottomSizeValue = document.getElementById('bottomSizeValue');
const borderValue = document.getElementById('borderValue');

topTextSizeInput.addEventListener('input', () => {
topSizeValue.textContent = topTextSizeInput.value;
});

bottomTextSizeInput.addEventListener('input', () => {
bottomSizeValue.textContent = bottomTextSizeInput.value;
});

borderThicknessInput.addEventListener('input', () => {
borderValue.textContent = borderThicknessInput.value;
});

let image = null;
const scaleFactor = 2;

const textLayers = [
{ type: 'top', y: 100, text: "", size: 40 },
{ type: 'bottom', y: null, text: "", size: 40 }
];

function loadImage(file) {
const reader = new FileReader();
reader.onload = () => {
image = new Image();
image.src = reader.result;
image.onload = () => {
canvas.width = image.width * scaleFactor;
canvas.height = image.height * scaleFactor;
textLayers[1].y = canvas.height - 100;
renderMeme();
};
};
if (file) reader.readAsDataURL(file);
}

imageInput.addEventListener('change', (event) => {
loadImage(event.target.files[0]);
});

document.addEventListener('paste', (event) => {
const items = event.clipboardData.items;
for (let item of items) {
if (item.type.startsWith('image/')) {
loadImage(item.getAsFile());
break;
}
}
});

function updateTextValues() {
textLayers[0].text = topTextInput.value || "";
textLayers[0].size = parseInt(topTextSizeInput.value, 10) * scaleFactor;

textLayers[1].text = bottomTextInput.value || ""; // ‚Üê Esta l√≠nea faltaba
textLayers[1].size = parseInt(bottomTextSizeInput.value, 10) * scaleFactor;
}


function renderMeme() {
if (!image) return;
ctx.clearRect(0, 0, canvas.width, canvas.height);
ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

ctx.fillStyle = 'white';
ctx.strokeStyle = 'black';
ctx.textAlign = 'center';
ctx.lineWidth = parseInt(borderThicknessInput.value, 10) * scaleFactor;

textLayers.forEach(layer => {
if (layer.text) {
ctx.font = `${layer.size}px Impact`;
ctx.fillText(layer.text.toUpperCase(), canvas.width / 2, layer.y);
ctx.strokeText(layer.text.toUpperCase(), canvas.width / 2, layer.y);
}
});
}

generateMemeButton.addEventListener('click', () => {
updateTextValues();
renderMeme();
});

downloadMemeButton.addEventListener('click', () => {
const link = document.createElement('a');
link.download = 'meme_hd.png';
link.href = canvas.toDataURL('image/png');
link.click();
});

let draggingText = null;
canvas.addEventListener('mousedown', (e) => {
const { offsetY } = e;
draggingText = textLayers.find(layer =>
offsetY >= layer.y - layer.size && offsetY <= layer.y
);
});

canvas.addEventListener('mousemove', (e) => {
if (draggingText) {
draggingText.y = e.offsetY;
renderMeme();
}
});

canvas.addEventListener('mouseup', () => {
draggingText = null;
});
</script>
</body>
  </html>
